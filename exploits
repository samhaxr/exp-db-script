#!/bin/bash
#!Coded by Suleman Malik
#!www.sulemanmalik.com

br(){
	echo -e "\033[0;31m----------------------------------------------------------------------\033[0m"
}
r_content(){
rm _tmp_con
rm _tmp_lnk
rm _init_
rm _D_
rm _lnkl_
rm cout
}
r_content > /dev/null 2>&1
clear
toilet exploit-db
echo -e "\033[0;32mby @Sulemanmalik_3                        			v.01\033[0m"
br
echo "(1) Web App Exploits"
echo "(2) Remote Exploits"
echo "(3) Local & Privilege Escalation Exploits"
echo "(4) Denial of Service & PoC Exploits"
echo ''
echo "Choice:"
read str
echo ''
echo "Page: "
read pg
br
if [[ "$str" -eq "1" ]]; then
		srh=$(curl -B -L --silent "www.exploit-db.com/webapps/?order_by=date_published&order=desc&pg=$pg" > _init_) 
	elif [[ "$str" -eq "2" ]]; then
		srh=$(curl -B -L --silent "www.exploit-db.com/remote/?order_by=date_published&order=desc&pg=$pg" > _init_) 
	elif [[ "$str" -eq "3" ]]; then
		srh=$(curl -B -L --silent "www.exploit-db.com/local/?order_by=date_published&order=desc&pg=$pg" > _init_) 
	elif [[ "$str" -eq "4" ]]; then
		srh=$(curl -B -L --silent "www.exploit-db.com/dos/?order_by=date_published&order=desc&pg=$pg" > _init_) 
	else
		echo ""
fi
echo -e "\033[0;33m[-] Connecting --> Xploit-DB \033[0m"
echo ''
elap=0
for i in {1..50}
do
elap=$(expr $elap + 1)
echo " $elap     -  " >> cout
echo " " >> cout
cat _init_ | grep -m$i "data-toggle=\"tooltip\"" | cut -c"119-" | cut -d'>' -f1 | tail -n1 | sed 's/\"//' >> _tmp_con
cat _init_ | grep -m$i "www.exploit-db.com/download/" | sed -E 's/.*(http[^"]*)".*/\1/g' | tail -n1 >> _tmp_lnk
cat _init_ | grep -m$i "www.exploit-db.com/download/" | sed -E 's/.*(http[^"]*)".*/\1/g' | tail -n1 >> _lnkl_
echo '' >> _tmp_con
echo '' >> _tmp_lnk
echo -ne "\033[0;32m[+] Gathering exploits: \033[0m$elap/50\r"
done
echo ''
echo ''
echo -e "\033[0;32m[+] Process done! \033[0m"
echo ''
runp=$(awk 'NR==FNR{a[++y]=$0;next}{b[++x]=$0}
END{z=x>y?x:y;while(++i<=z){print a[i],b[i]}}' cout _tmp_con > _D_)
sleep 1
while read mx
do
	echo $mx
done < _D_
br
echo "Download exploit (y/n)"
read ch
if [ "$ch" == "y" ]
	then
	echo ''
	echo "Exploit No:"
	read exploit
	br
	explo=$(awk NR==$exploit _lnkl_)
	sleep 1
	down=$(wget $explo -P $PWD/Downloaded-Exploits) > /dev/null 2>&1
	op=$(open Downloaded-Exploits)
	echo ''
else
	echo ""
fi
echo -e "\033[0;32mProcess Done! Press return key to exit...\033[0m"
read ext
r_content > /dev/null 2>&1
